<?php

$AppRootDir = "magic2";
$AppName = "Magic";
$LocalPort = "80"; 
$MySQLPort = "3306";
$AppUrl = "http://localhost";

// MySQL variables. Set here so all changes are made at top of file.
$MySQLHost = "localhost";
$MySQLDbName = "magic";
$MySQLUsername = "root";
$MySQLPassword = "root";

// Default page settings
$PageTitle = "Magic"; // This is the default page title
$Favicon = "src/user/img/framework/favicon_hat.ico";

/* =============================================================================================================================================================================== 
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
================================================================================================================================================================================== 
==================================================================================================================================================================================
================================================================================================================================================================================== 
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
================================================================================================================================================================================== 
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
======================================================= DO NOT EDIT BELOW THIS LINE UNLESS YOU KNOW WHAT YOU ARE DOING ===========================================================
==================================================================================================================================================================================
================================================================================================================================================================================== 
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
================================================================================================================================================================================== 
================================================================================================================================================================================== 
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
==================================================================================================================================================================================
=============================================================================================================================================================================== */

// -1 = Default to AppState settings. Any other value will allow overwriting of default AppState unless Live mode is engaged.
$DebugMode = -1;
$DebugLevel = -1;
$AppCache = -1;
$AppHeader = -1;

// Set AppState after dev options to give chance to change it
$AppState = GetAppState(AppState);

/************
Dev
************/
$DevArray = [
    // Set the AppState for dev purposes
    "AppState" => $AppState,

    /*
        Used for dev only
        dev: $DebugMode = 1;
        prod: $DebugMode = 0;
    */
    "DebugMode" => $DebugMode,

    /*
        The type of errors you want to receive. Set to 0 for production.
        Debug Level
        0) Off
        1) [Low] Major errors only
        2) [Medium] Major errors and warnings
        3) [High] Major errors, warnings and notices (E-ALL)
    */
    "DebugLevel" => $DebugLevel,

    // Usually only used for Alpha Mode
    "AppHeader" => $AppHeader
]; // $DevArray

/************
App
************/
$AppArray = [
/* App or site name */
    "AppName" => $AppName,

    /* Default page title */
    "PageTitle" => $PageTitle,

    /* Favicon */
    "Favicon" => $Favicon,

    /* App root directory */
    "AppRootDir" => $AppRootDir,

    /* Server environment */
    "AppEnv" => "linux",

    /* Base directory where Src file is located */
    "BaseDir" => $BaseDir = $_SERVER["DOCUMENT_ROOT"] . "/$AppRootDir/",

    /* Base URL for site */
    "BaseUrl" => $BaseUrl = $AppUrl . (!empty($LocalPort) && $LocalPort != "80" ? ":" . $LocalPort : "") . "/" . $AppRootDir ."/",

    // Sub-Directory for URL/URI purposes
    "BaseUriExt" => "$AppRootDir/",

    // Cache pages and scripts
    "AppCache" => $AppCache
]; // $AppArray

/************
Base Paths
************/
$SrcUrl = $BaseUrl . "src/";
$SrcDir = $BaseDir . "src/";

$UserUrl = $SrcUrl . "user/";
$UserDir = $SrcDir . "user/";

$AppUrl = $SrcUrl . "app/";
$AppDir = $SrcDir . "app/";

$BuildUrl = $UserUrl . "build/";
$BuildDir = $UserDir . "build/";

$DependsUrl = $AppUrl . "dependencies/";
$DependsDir = $AppDir . "dependencies/";

// Dynamically build the array
$PathsArray = [
    "Base" => [
        "Url" => $BaseUrl,
        "Dir" => $BaseDir
    ],

    "Src" => [
        "Url" => $SrcUrl,
        "Dir" => $SrcDir
    ],

    "User" => [
        "Url" => $UserUrl,
        "Dir" => $UserDir
    ],

    "App" => [
        "Url" => $AppUrl,
        "Dir" => $AppDir
    ],

    "Routes" => [
        "Url" => $SrcUrl . "routes/",
        "Dir" => $SrcDir . "routes/"
    ],

    "Views" => [
        "Url" => $UserUrl . "views/",
        "Dir" => $UserDir . "views/"
    ],

    "Controllers" => [
        "Url" => $UserUrl . "controllers/",
        "Dir" => $UserDir . "controllers/"
    ],

    "Models" => [
        "Url" => $UserUrl . "models/",
        "Dir" => $UserDir . "models/"
    ],

    "Css" => [
        "Url" => $UserUrl . "styles/",
        "Dir" => $UserDir . "styles/"
    ],

    "Js" => [
        "Url" => $UserUrl . "js/",
        "Dir" => $UserDir . "js/",
        "Core" => [
            "Url" => $AppUrl . "js/",
            "Dir" => $AppDir . "js/"
        ]
    ],

    "Php" => [
        "Url" => $UserUrl . "php/",
        "Dir" => $UserDir . "php/",
        "Core" => [
            "Url" => $AppUrl . "php/",
            "Dir" => $AppDir . "php/"
        ]
    ],

    "Forms" => [
        "Url" => $UserUrl . "forms/",
        "Dir" => $UserDir . "forms/"
    ],

    "Img" => [
        "Url" => $UserUrl . "img/",
        "Dir" => $UserDir . "img/"
    ],

    "Plugins" => [
        "Url" => $AppUrl . "plugins/",
        "Dir" => $AppDir . "plugins/"
    ],

    "Depends" => [
        "Url" => $AppUrl . "dependencies/",
        "Dir" => $AppDir . "dependencies/"
    ],

    "Logs" => [
        "Url" => $AppUrl . "logs/",
        "Dir" => $AppDir . "logs/"
    ],

    "Build" => [
        "Url" => $BuildUrl,
        "Dir" => $BuildDir
    ],

    "Dom" => [
        "Url" => $BuildUrl . "dom/",
        "Dir" => $BuildDir . "dom/"
    ],

    "Nav" => [
        "Url" => $BuildUrl . "nav/",
        "Dir" => $BuildDir . "nav/"
    ],

    "Layouts" => [
        "Url" => $BuildUrl . "layouts/",
        "Dir" => $BuildDir . "layouts/"
    ]
]; // $PathsArray

/************
Plugins Paths - Stand-alone plugins that containt depndencies which the framework is built with.
************/
$DependsArray = [
// SQL Query Builder
    "Aces" => [
        "Url" => $DependsUrl . "aces-sql/",
        "Dir" => $DependsDir . "aces-sql/"
    ],

    // Errors
    "Decks" => [
        "Url" => $DependsUrl . "decks/",
        "Dir" => $DependsDir . "decks/"
    ],

    // Logging
    "Flops" => [
        "Url" => $DependsUrl . "flops/",
        "Dir" => $DependsDir . "flops/"
    ],

    // Form Building
    "Folds" => [
        "Url" => $DependsUrl . "folds-forms/",
        "Dir" => $DependsDir . "folds-forms/"
    ],

    // Ajax Quick Library
    "Spades" => [
        "Url" => $DependsUrl . "spades-ajax/",
        "Dir" => $DependsDir . "spades-ajax/"
    ]
]; // Depends array


/************
Database Array
************/
$DbArray = [
    /* Connection Type */
    "Connection" => "mysql",

    /* Host name */
    "Host" => $MySQLHost,

    /* Default charset */
    "Charset" => "utf8mb4",

    /* Default port */
    "Port" => $MySQLPort,

    /* DataBase name */
    "Database" => $MySQLDbName,

    /* SQL user */
    "Username" => $MySQLUsername,

    /* SQL password */
    "Password" => $MySQLPassword
]; // $db array

return array(
    "Dev" => $DevArray,
    "App" => $AppArray,
    "Paths" => $PathsArray,
    "Depends" => $DependsArray,
    "Db" => $DbArray
);


function GetAppState($AppState){
    global $DebugMode, $DebugLevel, $AppCache, $AppHeader;
    if($AppState == "Live"){
        $DebugMode = 0;
        $DebugLevel = 0;
        $AppCache = 1;
        $AppHeader = 0;
    }elseif($AppState == "Alpha"){
        if($DebugMode == -1) $DebugMode = 1;
        if($DebugLevel == -1) $DebugLevel = 3;
        if($AppCache == -1) $AppCache = 0;
        if($AppHeader == -1) $AppHeader = 1;
    }elseif($AppState == "Beta"){
        if($DebugMode == -1) $DebugMode = 1;
        if($DebugLevel == -1) $DebugLevel = 2;
        if($AppCache == -1) $AppCache = 0;
        if($AppHeader == -1) $AppHeader = 0;
    }
    SetDevOpts();
    return $AppState;
}

function SetDevOpts(){
    global $DebugMode, $DebugLevel, $AppCache, $AppHeader;
    // Cache
    if($AppCache == 0){
        header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
        header("Cache-Control: post-check=0, pre-check=0", false);
        header("Pragma: no-cache");
    }
    // Error checking
    if($DebugLevel == 3){
        ini_set("display_errors", "on");
        error_reporting(E_ALL);
    }elseif($DebugLevel == 2){
        ini_set("display_errors", "on");
        error_reporting(~E_ALL & ~E_NOTICE);
    }else{
        ini_set("display_errors", "off");
        error_reporting(~E_ALL);
    }
}